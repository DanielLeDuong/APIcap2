"use strict";function _objectWithoutProperties(e,r){if(null==e)return{};var t,s,o=_objectWithoutPropertiesLoose(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)t=n[s],0<=r.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function _objectWithoutPropertiesLoose(e,r){if(null==e)return{};var t,s,o={},n=Object.keys(e);for(s=0;s<n.length;s++)t=n[s],0<=r.indexOf(t)||(o[t]=e[t]);return o}var express=require("express"),mongoose=require("mongoose"),cors=require("cors"),RegisterModel=require("./ApiUser/Register"),cookieParser=require("cookie-parser"),authRoute=require("./routes/auth"),app=express(),userRoute=require("./routes/user");app.use(express.json()),app.use(cors()),app.use(cookieParser()),mongoose.connect("mongodb+srv://mavoiem:WF3Xhi73BH6dXiOr@cap2api.evksd.mongodb.net/Cap2API?retryWrites=true&w=majority"),app.post("/register",function(e,r){RegisterModel.create(e.body).then(function(e){return r.json(e)}).catch(function(e){return r.json(e)})}),app.post("/login",function(e,r){var t=e.body,s=t.username,o=t.password;RegisterModel.findOne({username:s}).then(function(e){console.log(e),e?e.password===o?r.json("Success"):r.json("the password is incorrect"):r.json("No existed")})}),app.put("/update",function(r,t){var s,o,n,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,o=s._id,n=_objectWithoutProperties(s,["_id"]),console.log(n),e.next=4,regeneratorRuntime.awrap(RegisterModel.updateOne({_id:o},n));case 4:u=e.sent,t.send({success:!0,message:"update successfull",data:u});case 6:case"end":return e.stop()}})}),app.delete("/delete/:id",function(r,t){var s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.params.id,e.next=3,regeneratorRuntime.awrap(RegisterModel.deleteOne({_id:s}));case 3:o=e.sent,t.send({success:!0,message:"delete successfull",data:o});case 5:case"end":return e.stop()}})}),app.use("/v1/auth",authRoute),app.use("/v1/user",userRoute),app.listen(3001,function(){console.log("server is running")});
//# sourceMappingURL=index.min.js.map
