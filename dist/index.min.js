"use strict";function _objectWithoutProperties(e,r){if(null==e)return{};var o,t,s=_objectWithoutPropertiesLoose(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(t=0;t<n.length;t++)o=n[t],0<=r.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}function _objectWithoutPropertiesLoose(e,r){if(null==e)return{};var o,t,s={},n=Object.keys(e);for(t=0;t<n.length;t++)o=n[t],0<=r.indexOf(o)||(s[o]=e[o]);return s}var express=require("express"),mongoose=require("mongoose"),cors=require("cors"),RegisterModel=require("./ApiUser/Register"),cookieParser=require("cookie-parser"),authRoute=require("./routes/auth"),app=express(),userRoute=require("./routes/user");app.use(express.json()),app.use(cors()),app.use(cookieParser()),mongoose.connect("mongodb+srv://mavoiem:WF3Xhi73BH6dXiOr@cap2api.evksd.mongodb.net/Cap2API?retryWrites=true&w=majority"),app.post("/register",function(e,r){RegisterModel.create(e.body).then(function(e){return r.json(e)}).catch(function(e){return r.json(e)})}),app.post("/login",function(e,r){var o=e.body,t=o.username,s=o.password;RegisterModel.findOne({username:t}).then(function(e){console.log(e),e?e.password===s?r.json("Success"):r.json("the password is incorrect"):r.json("No existed")})}),app.put("/update",function(r,o){var t,s,n,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.body,s=t.id,n=_objectWithoutProperties(t,["id"]),console.log(n),e.next=4,regeneratorRuntime.awrap(RegisterModel.updateOne({_id:s},n));case 4:u=e.sent,o.send({success:!0,message:"update successfull",data:u});case 6:case"end":return e.stop()}})}),app.use("/v1/auth",authRoute),app.use("/v1/user",userRoute),app.listen(3001,function(){console.log("server is running")});
//# sourceMappingURL=index.min.js.map
